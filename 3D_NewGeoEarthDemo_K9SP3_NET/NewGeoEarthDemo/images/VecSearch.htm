<html>
<head>
   <!-- <script type = "text/javascript" src = "js/AjaxRequest.js"></script>
    <script type = "text/javascript" src = "js/ZondyEarth.js"></script>
    <script type = "text/javascript" src = "js/SelectTool.js"></script>-->
   <!-- <script type = "text/javascript" src = "js/IFrameEventHandler.js"></script>-->
  <!--  <script type = "text/javascript" src = "js/main.js"></script>-->
    <script type = "text/javascript">
//	    var visible = true;
//	    var iframeId = "rightvec";
//	    var height = 25;
//	    var rowh = 18;
//	    function hide(){
//		    var h = tb1.style;
//		    if(h.display==""){
//			    tb1.style.display="none";
//		    }
//		    else{
//			    tb1.style.display="";
//		    }
//	    }
//	    function ResizeHeight(){
//            var h = tb1.style;
//		    if(h.display==""){
//                height = 52;
//                
//                var t1 = document.getElementById("featclsname");
//	            if(t1!=null){
//	                height += 16;
//	                var d1 = document.getElementById("featclsname").style.display;
//	                if(d1!="none"){
//                        var h1 = rowh*t1.rows.length;
//                        height += h1;
//	                }
//                }
//                var t2 = document.getElementById("featclsid");
//	            if(t2!=null){
//	                height += 16;
//                    var d2 = document.getElementById("featclsid").style.display;
//	                if(d2!="none"){
//	                    var h2 = rowh*t2.rows.length;
//	                    height += h2;
//	                }
//                }
//                var t3 = document.getElementById("featclsattr");
//	            if(t3!=null){
//	                height += 16;
//                    var d3 = document.getElementById("featclsattr").style.display;
//	                if(d3!="none"){
//	                    var h3 = rowh*t3.rows.length;
//	                    height += h3;
//	                }
//                }
//		    }
//		    else{
//                height = 25;
//		    }
//		    var objstyle = this.parent.document.getElementById(iframeId).style;
//		    if (height>1000) {
//		        height = "100%";
//		    }
//		    objstyle.height = height +"px";
//	    }
//	    
//	    function HideChildDiv(id) {

//	        var obj = id.style;
//	        if(obj.display=="none"){
//	            obj.display = "block";
//	        }
//	        else{
//	            obj.display = "none";
//	        }
//	    }
//	    function recheck()
//    {
//    var hideDiv = document.getElementById("hidePointDiv");
//    
//    if (hideDiv == null) {
//    return;
//    }
//    
//       //获取查询数据库
//     var inf =this.parent.ze.GetVisibleInfo();
//     if(inf == "")
//     {
//        return;
//     }
//     //mapdoc|mapname,scale;mapdoc|mapname,scale
//     var infoArr = inf.split(";");
//     var dataBaseNameurl = "";
//     for(var i = 0 ; i < infoArr.length -1 ; i ++)
//     {
//        if (infoArr[i] != "") {
//        var valArr = infoArr[i].split(",");
//        var nameArr = valArr[0].split("|");
//         dataBaseNameurl += nameArr[0]+";"+nameArr[1]+";"+valArr[1]+";"; 
//        }
//     };
//     if (infoArr[ infoArr.length -1] != "") {
//      var valArrend = infoArr[ infoArr.length -1].split(",");
//      var nameArrEnd = valArrend[0].split("|");
//      dataBaseNameurl += nameArrEnd[0]+";"+nameArrEnd[1]+";"+valArrend[1]; 
//     }
//     else{
//        return;
//     }
//     
//	if (hideDiv["selectType"] == "point") {
//	    var obj =document.getElementById("selQueryType");    
//        if(obj == null)
//        {
//            return;
//        }    
//        var point = hideDiv["selectResult"];
//        if (point == "") {
//            return;
//        }
//        var pointArr = point.split(",");
//	    var p0 = parseFloat(pointArr[0])+0.01;
//	    var p1 = parseFloat(pointArr[1])+0.01;

//        var objLayer =obj.document.getElementById("typeLayer");
//        var objMD =obj.document.getElementById("typeMD");
//        
//        if(objMD.checked)
//        {
//            var dataNameurl ="../MetadataSvc/MetadataItem.aspx?";
//            var dataName="Xmin="+pointArr[0]
//                    +"&Ymin="+pointArr[1]
//                    +"&Xmax="+p0
//                    +"&Ymax="+p1;
//            var url = dataNameurl + dataName;
//	        window.open(url);  
//        }
//        else if (objLayer.checked) {
//        //查询要素类
//     
//	    //var dataNameurl ="Handler.ashx/tddata?method=FeatureAttribute&classpath=VecSearchList&filter=dotX:"+pointArr[0]+",dotY:"+pointArr[1]+",maxX:0.01,maxY:0.01";
//	    var dataNameurl ="Handler.ashx/tddata?method=FeatAttr2&classpath="+dataBaseNameurl+"&filter="+pointArr[0]+","+pointArr[1]+",0.01,0.01";
//	    this.parent.AJAXRequest(dataNameurl,true,"GET","",parent.QueryPointFcls_CallBack,false);
//        }
//	}
//	else if (hideDiv["selectType"] == "rectangle") {
//	      var obj =document.getElementById("selQueryType");    
//        if(obj == null)
//        {
//            return;
//        }    
//        var pointArr = hideDiv["selectResult"];
//        if (pointArr == "") {
//            return;
//        }
//        
//        if (pointArr.length != 4) {
//         return;
//        }

//        var objLayer =obj.document.getElementById("typeLayer");
//        var objMD =obj.document.getElementById("typeMD");
//        
//        if(objMD.checked)
//        {
//            var dataNameurl ="../MetadataSvc/MetadataItem.aspx?";
//            var dataName="Xmin="+pointArr[1]
//                    +"&Ymin="+pointArr[3]
//                    +"&Xmax="+pointArr[0]
//                    +"&Ymax="+pointArr[2];
//            var url = dataNameurl + dataName;
//	        window.open(url);  
//        }
//        else if (objLayer.checked) {
//        //查询要素类
//	     //var dataNameurl ="Handler.ashx/tddata?method=FeatureAttribute&classpath=VecSearchList&filter=XMax:"+pointArr[0]+",XMin:"+pointArr[1]+",YMax:"+pointArr[2]+",YMin:"+pointArr[3]+",MustInside:false";
//	     var dataNameurl ="Handler.ashx/tddata?method=FeatAttr2&classpath="
//    +dataBaseNameurl+"&filter="+pointArr[0]+","+pointArr[1]+","+pointArr[2]+","+pointArr[3]+",false";
//	this.parent.AJAXRequest(dataNameurl,true,"GET","",parent.QueryRangeFcls_CallBack,false);
//	}
//	}
//	
//}
    </script>

    <style type="text/css">
    *
    {
	    margin:0px;
	    padding:0px;
	    font-size:12px;	
	    	scrollbar-face-color: #EEEEEE;
	scrollbar-shadow-color: #000000; 
	scrollbar-highlight-color: #000000; 
	scrollbar-3dlight-color: #EEEEEE; 
	scrollbar-darkshadow-color: #EEEEEE; 
	scrollbar-track-color: #EEEEEE;
	scrollbar-arrow-color: #000000;
    }
    body
    {
	    width:100%;
	    height:100%;
	    position:absolute;
	    left:0px;
	    top:0px;
	    border-width:0px;
	    background-color:#ffffff;
    }
    a {
        font-size:11px;	
	    color: #2C59AB;
	    text-decoration: none;
    }
    
    a:hover{
    font-weight:bold;
	color: #2C59AB;
	text-decoration: underline;
	font-size: 12px;
    }
    a:active{
        background-color: #c0d2ff;
    }
    a:visited{
        color: #600560;
    }
.TDEButton
{
    width:22px;
	height: 23px;
	border: #C3DAFF 1px solid;
    filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#ffffff, EndColorStr=#C3DAF5); 
	cursor: hand; 
	color: #2C59AB;	
}
	    #root {
		    top:0px;
		    left:0px;
		    position:absolute;
		    height:100%;
		    width:250px;
		    background-color:#F4F4F4;
		    border:1px solid #333;
		    z-index:3;
		    }
    	    
	    #handle {
		    width:100%;
        filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#dddddd, EndColorStr=#ffffff);

		    }
        #featclsattr{
            color:#000000;
            		    background-color:#beddfb;
		    filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#307AA7, EndColorStr=#A7E4FC); 
        }
    	    
    #endif
    </style>

</head>

<body onload="SelMode(2);OnSel(4);">


<div id="root">
	<div id="handle" >
	    <table style="width:100%;font:bolder;">
	         <tr style="height:10px;" vAlign="bottom" >
	             <td style="cursor:hand" onmouseup="parent.ResizeHeight();">矢量查询：</td>                   
                 <td id= "selQueryType">
                    <input  type="radio" id="typeLayer" onclick = "parent.recheck()" checked="checked" value="a" name="rtype"/>要素类
                    <input type="radio" id="typeMD" onclick = "parent.recheck()" value="b" name="rtype"/>元数据
                 </td>
                 <td align="right"><a href="javascript:parent.CloseVecSearchDiv();" target="_self" style=" right:2px;"><img alt="关闭" src="images/closeDivRed.gif" style=" border-style:none;" /></a></td>
             </tr>
        </table>
                        <ul>
            <li id="li1" style="float:right;padding-right:20px;"><img onclick="SelMode(1);" onmouseout="OnSel(4);" onmouseover="OnSel(1)"alt=""  style="cursor:hand;height:35px;"  src="images/polygonSel.png" /></li>
        	<li id="li2" style="float:right;padding-right:20px;"><img onclick="SelMode(2);" onmouseout="OnSel(4);" onmouseover="OnSel(2)"alt=""  style="cursor:hand;height:35px;"  src="images/rectSel.png" /></li>
        	<li id="li3" style="float:right;padding-right:20px;"><img onclick="SelMode(3);" onmouseout="OnSel(4);" onmouseover="OnSel(3)"alt=""  style="cursor:hand;height:35px;"  src="images/pointSel.png" /></li>
        </ul>
    </div>
    <script type="text/javascript">
        var current = 2;
        function SelMode(t){
            if (t==1) {
                parent.getmode('polygon');parent.ResizeHeight();
                current = 1;
            }
            else if(t==2){
                parent.getmode('rectangle');parent.ResizeHeight();current = 2;
            }
            else{
                parent.getmode('point');parent.ResizeHeight();current = 3;
            }
        }
        function OnSel(t){
            
            if (t==1) {
                document.getElementById("li1").style.zoom = 1.3;
                document.getElementById("li2").style.zoom = 1.0;
                document.getElementById("li3").style.zoom = 1.0;

            }
            else if(t==2){
                document.getElementById("li1").style.zoom = 1.0;
                document.getElementById("li2").style.zoom = 1.3;
                document.getElementById("li3").style.zoom = 1.0;
            }
            else if(t==3){
                document.getElementById("li1").style.zoom = 1.0;
                document.getElementById("li2").style.zoom = 1.0;
                document.getElementById("li3").style.zoom = 1.3;
            }
            else{
                document.getElementById("li1").style.zoom = 1.0;
                document.getElementById("li2").style.zoom = 1.0;
                document.getElementById("li3").style.zoom = 1.0;
                var n = "li"+current;
                var obj = document.getElementById(n);
                if (obj!=null) {
                    obj.style.zoom = 1.3;
                }
            }


        }
    </script>
	    <img id="mapProcBar" src="images/loading.gif" style="visibility:hidden;z-index:99;position:absolute;width:94px;height:17px;top:5px;left:46px;" />
        <table id="tb1" style="background-color:White;">
            <tr align="right">
            </tr>
        </table>
        <div>

        </div>

        
        <div id="layerList" style="margin-top:30px;top:30px;height:auto;display:none;font-size: 12px;">
        </div>
        
        <div id="feaList" style="height:auto;display:none;font-size: 12px;">
        </div>
        
        <div id="resultList" style="height:100%;display:none;font-size: 12px;">
            </div>
        <div id="hidePointDiv" style="display:none;font-size: 12px;">
        </div>
</div>

</body>

</html>